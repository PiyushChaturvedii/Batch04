<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADJS: Promise</title>
    
</head>
<body>

    <script>
let promiseCall = function (returnData, message) {
    return function (resolve,reject) {
        setTimeout(()=>{
            console.log(`The ${message} promise has resolved`);
            resolve(returnData);
        },returnData*100);
    }
}


let p1 = new Promise(promiseCall(10,"First"));
let p2 = new Promise(promiseCall(20,"Second"));
let p3 = new Promise(promiseCall(30,"Third"));
let p4 = new Promise(function (resolve,reject) {
    reject("The 4th Promise has reject.")
})
 var total = 0;

Promise.all([p1,p2,p3,p4]).then((result)=>{
    for(var i in result) {total += result[i]}
console.log(`Result: ${result}`);
console.log(`Total: ${total}`);
}
).catch(err=>{console.log(err);})



    // let p1 = new Promise((resolve,reject)=>{
    //     setTimeout(()=>{
    //         console.log('The first promise has resolved');
    //         resolve(10)
    //     },1*1000);
    // })
    
    // let p2 = new Promise((resolve,reject)=>{
    //     setTimeout(()=>{
    //         console.log('The Second promise has resolved');
    //         resolve(20);
    //         // reject(20);
    //     },2*1000);
    // })
    
    // let p3 = new Promise((resolve,reject)=>{
    //     setTimeout(()=>{
    //         console.log('The Third promise has resolved');
    //         resolve(30);
    //     },3*1000);
    // })
// var total = 0;
//     Promise.all([p1,p2,p3]).then((result)=>{
//         for(var i in result){total += result[i]}
//         console.log(`Result: ${result}`);
//         console.log(`Total: ${total}`);
//     }).catch(err=>console.log(err))

    </script>
    
</body>
</html>